---
Name: graphql-my-schema
After:
  - '*'
---
SilverStripe\Control\Director:
  rules:
    'ingo-test/graphql': '%$SilverStripe\GraphQL\Controller.ingo-test'

SilverStripe\Core\Injector\Injector:
  SilverStripe\GraphQL\Controller.ingo-test:
    class: SilverStripe\GraphQL\Controller
    constructor:
      schema: ingo-test

SilverStripe\GraphQL\Schema\Schema:
  schemas:
    ingo-test:
      defaults:
        operations:
          read:
            plugins:
              readVersion: true
          readOne:
            plugins:
              readVersion: true
        models:
          DataObject:
            plugins:
              versioning: true
              inheritance: true
      models:
        SilverStripe\CMS\Model\SiteTree:
          fields: '*'
        Page:
          fields:
            subHeading: true
          operations:
            read: true
            create:
              fields:
                - title
                - content
                - subHeading
        SilverStripe\CMS\Model\RedirectorPage:
          fields:
            externalUrl: true
